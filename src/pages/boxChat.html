<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Messaging Interface with Dark Mode</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* Light and Dark mode styles */
    .dark-mode {
      background-color: #1e293b;
      color: white;
    }

    .dark-mode .bg-white {
      background-color: #334155;
    }

    .dark-mode .bg-gray-200 {
      background-color: #475569;
    }

    .dark-mode .bg-gray-100 {
      background-color: #1e293b;
    }

    .dark-mode .text-gray-700 {
      color: #e2e8f0;
    }

    .dark-mode .text-gray-500 {
      color: #94a3b8;
    }

    .dark-mode .hover\:bg-gray-100:hover {
      background-color: #475569;
    }

    .dark-mode .border-gray-200 {
      border-color: #64748b;
    }
  </style>
</head>

<body class="bg-gray-100">

  <!-- Container -->
  <div class="container mx-auto flex flex-col h-screen md:flex-row">

    <!-- Sidebar (Responsive) -->
    <div id="sidebar" class="w-full md:w-1/4 bg-gray-200 p-4 hidden md:block">
      <div class="relative flex gap-2">
        <img id="menu-icon" src="https://cdn-icons-png.flaticon.com/512/1828/1828859.png" alt="Menu Icon"
          class="w-6 h-6 cursor-pointer mt-2 screen-md:hidden">
        <input type="text" id="search-input" placeholder="Search"
          class="w-full p-2 rounded-lg bg-white border border-gray-300">
        <span class="absolute inset-y-0 right-3 flex items-center">
          <img src="https://cdn-icons-png.flaticon.com/512/622/622669.png" alt="Search Icon" class="w-5 h-5">
        </span>
      </div>
      <!-- Dropdown Menu -->
      <div id="dropdown-menu" class="dropdown absolute mt-2 w-48 bg-white rounded-lg shadow-lg py-2 hidden z-50">
        <div class="flex items-center space-x-3 cursor-pointer hover:bg-slate-300 mx-[10px]">
          <img id="avatar" src="" alt="Avatar" class="rounded-full w-10 h-10">
          <div>
            <h3 id="fname" class="text-sm font-semibold"></h3>
          </div>
        </div>
        <div class="group flex items-center gap-[5px] mx-[10px] hover:bg-gray-100 ">
          <i class="fa-brands fa-stack-exchange"></i>
          <a href="#" class="block px-4 py-2 text-gray-700">New Direct Message</a>
        </div>
        <div class="group flex items-center gap-[5px] mx-[10px] hover:bg-gray-100 ">
          <i class="fa-solid fa-user-group"></i>
          <a href="#" class="block px-4 py-2 text-gray-700">New Group</a>
        </div>
        <div class="group flex items-center mx-[10px] gap-[5px] my-[10px]">
          <i class="fa-brands fa-themeco"></i>
          <span class="mr-auto text-gray-700 mx-[10px]">Dark Mode</span>
          <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" id="dark-mode-toggle" class="sr-only peer">
            <div
              class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
            </div>
          </label>
        </div>
        <div class="group flex items-center gap-[5px] mx-[10px] hover:bg-gray-100 ">
          <i class="fa-solid fa-right-from-bracket"></i>
          <a href="#" class="block px-4 py-2 text-gray-700">Sign Out</a>
        </div>
      </div>

      <!-- Contacts list -->
      <div class="hidden mt-6 space-y-4">
        <div class="flex items-center space-x-3 cursor-pointer hover:bg-slate-300">
          <img src="https://i.pravatar.cc/40" alt="Avatar" class="rounded-full w-10 h-10">
          <div>
            <h3 class="text-sm font-semibold">Bill Kuphal</h3>
            <p class="text-xs text-gray-500">Online for 10 mins</p>
          </div>
        </div>

        <div class="flex items-center space-x-3 cursor-pointer hover:bg-slate-300">
          <img src="https://i.pravatar.cc/41" alt="Avatar" class="rounded-full w-10 h-10">
          <div>
            <h3 class="text-sm font-semibold">Photographers</h3>
            <p class="text-xs text-gray-500">Here’re my latest drone shots</p>
          </div>
          <span class="text-sm bg-red-500 text-white px-2 py-1 rounded-full">80</span>
        </div>

        <div class="flex items-center space-x-3 cursor-pointer hover:bg-slate-300">
          <img src="https://i.pravatar.cc/42" alt="Avatar" class="rounded-full w-10 h-10">
          <div>
            <h3 class="text-sm font-semibold">Daryl Bogisch, Ian Daniel, +1</h3>
            <p class="text-xs text-gray-500">Store is out of stock</p>
          </div>
        </div>
      </div>
      <div id="searchUser" class="mt-6 space-y-4">

      </div>

      <div id="contact" class="mt-6 space-y-4">
        
      </div>
    </div>

    <!-- Chat Area -->
    <div id="chatArea" class="w-full md:w-3/4 bg-white p-4 flex flex-col justify-between">
      <!-- Chat header -->
      <div class="flex items-center justify-between pb-4 border-b border-gray-200">
        <div class="flex items-center space-x-3">
          <img id="avatarUserChatting" src="" alt="Avatar" class="rounded-full w-10 h-10">
          <div>
            <h3 id="userChatting" class="text-lg font-semibold"></h3>
          </div>
        </div>
      </div>

      <!-- Chat messages -->
      <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4 ">


        <!-- Preview area for selected images -->
        <div id="image-preview-area" class="flex space-x-2 mt-4"></div>
      </div>

      <!-- Chat input with attachment -->
      <div class="border-t border-gray-200 p-4 flex items-center space-x-3">
        <!-- Plus button for adding attachment -->
        <form action="">
          <input type="file" id="image-input" accept="image/*" multiple class="hidden" />
          <button id="add-image-btn" class="bg-gray-200 p-2 rounded-full hover:bg-gray-300 focus:outline-none">
            <img src="https://cdn-icons-png.flaticon.com/512/1828/1828919.png" alt="Plus" class="w-6 h-6">
          </button>
          <input type="text" id="message-input" placeholder="Type your message..."
            class="w-full p-2 rounded-lg border border-gray-300 text-black">
          <button type="submit" id="send-btn"
            class="bg-blue-500 w-[40px] p-2 rounded-full hover:bg-blue-600 focus:outline-none">
            <i class="fa-regular fa-paper-plane text-[16px] text-white"></i>
          </button>
        </form>
      </div>
    </div>
    <!-- Welcome -->
    <div id="wellCome" class="w-full md:w-3/4 bg-white p-4 flex flex-col items-center justify-center gap-16">
      <div class="max-w-md mx-auto text-center flex flex-col gap-8">
        <h3 class="text-3xl font-medium">Chào mừng đến với Box chat!</h3>
        <div>Khám phá những tiện ích hỗ trợ làm việc và trò chuyện cùng người thân, bạn bè được tối ưu hóa cho máy tính
          của bạn</div>
      </div>
      <div>
        <img src="../assets/contact.jpg" alt="">
      </div>
    </div>
  </div>



  <!-- <script>
    // Menu toggle script
    const menuIcon = document.getElementById('menu-icon');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const body = document.body;

    menuIcon.addEventListener('click', () => {
      dropdownMenu.classList.toggle('hidden'); // Toggle visibility of the dropdown
    });

    // Toggle dark mode
    darkModeToggle.addEventListener('change', () => {
      body.classList.toggle('dark-mode');
    });

    // Handle image selection
    const imageInput = document.getElementById('image-input');
    const addImageBtn = document.getElementById('add-image-btn');
    const imagePreviewArea = document.getElementById('image-preview-area');

    addImageBtn.addEventListener('click', () => {
      imageInput.click(); // Simulate click on the file input
    });

    imageInput.addEventListener('change', () => {
      previewImages(); // Preview images on selection
    });

    // Preview images function
    function previewImages() {
      const files = imageInput.files;
      imagePreviewArea.innerHTML = ''; // Clear previous previews

      for (const file of files) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const imgDiv = document.createElement('div');
          imgDiv.className = 'relative rounded-lg';
          const img = document.createElement('img');
          img.src = event.target.result; // Set image source to the result of FileReader
          img.className = 'w-20 h-20 object-cover rounded-lg mr-2'; // Image style

          // Create remove button
          const removeBtn = document.createElement('button');
          removeBtn.innerHTML = '&times;'; // X icon
          removeBtn.className = 'absolute top-0 right-0 bg-red-500 text-white rounded-full w-6 h-6';
          removeBtn.onclick = () => {
            removeImage(file);
          };

          imgDiv.appendChild(img);
          imgDiv.appendChild(removeBtn);
          imagePreviewArea.appendChild(imgDiv);
        };
        reader.readAsDataURL(file); // Read the image file as Data URL
      }
    }

    // Remove image function
    function removeImage(fileToRemove) {
      const files = Array.from(imageInput.files);
      const filteredFiles = files.filter(file => file !== fileToRemove);
      const dataTransfer = new DataTransfer();
      filteredFiles.forEach(file => dataTransfer.items.add(file));
      imageInput.files = dataTransfer.files; // Update input files
      previewImages(); // Refresh preview
    }

    // Send message and images
    const sendBtn = document.getElementById('send-btn');
    const messageInput = document.getElementById('message-input');
    const chatMessages = document.getElementById('chat-messages');

    sendBtn.addEventListener('click', () => {
      sendMessage();
    });

    messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });

    function sendMessage() {
      const messageText = messageInput.value;
      const files = imageInput.files;

      // Create message container
      const messageContainer = document.createElement('div');
      messageContainer.className = 'flex flex-col items-end ';

      // Create text message
      if (messageText) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'bg-blue-500 text-white p-3 rounded-lg text-sm max-w-md break-words';
        messageDiv.textContent = messageText;
        messageContainer.appendChild(messageDiv);
      }

      // Create image previews
      if (files.length > 0) {
        for (const file of files) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const imageDiv = document.createElement('div');
            imageDiv.className = 'text-white p-3 rounded-lg text-sm max-w-md w-[200px] my-[30px] break-words';
            const img = document.createElement('img');
            img.src = event.target.result; // Set image source to the result of FileReader
            img.className = 'rounded-lg mb-2';
            img.alt = 'Image preview';
            imageDiv.appendChild(img);
            messageContainer.appendChild(imageDiv);
          };
          reader.readAsDataURL(file); // Read the image file as Data URL
        }
      }

      // Append message container to chat messages
      chatMessages.appendChild(messageContainer);
      chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to the bottom
      messageInput.value = ''; // Clear the message input
      imageInput.value = ''; // Clear the image input
      imagePreviewArea.innerHTML = ''; // Clear image preview area
    }
  </script> -->
  <script type="text/javascript" src="../js/boxChat.js"></script>
  <script type="text/javascript" src="../js/contact.js"></script>
</body>

</html>